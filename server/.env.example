# Server Configuration
NODE_ENV=development
PORT=5001
FRONTEND_URL=http://localhost:3000

# Database
MONGODB_URI=mongodb://localhost:27017/wa_saas
# For Docker: mongodb://admin:password@localhost:27017/wa_saas?authSource=admin
USE_IN_MEMORY_DB=false

# Redis
REDIS_URL=redis://127.0.0.1:6379

# JWT Authentication
JWT_SECRET=your-secret-key-change-in-production

# ==============================================================================
# META WHATSAPP CLOUD API CONFIGURATION
# Get these from https://developers.facebook.com/apps
# ==============================================================================

META_APP_ID=your-meta-app-id
META_APP_SECRET=your-meta-app-secret

# System User Access Token (with whatsapp_business_management & whatsapp_business_messaging)
# Generate from: Business Settings > System Users > Generate Token
META_ACCESS_TOKEN=your-permanent-access-token

# Phone Number ID from your WABA
META_PHONE_NUMBER_ID=your-phone-number-id

# WhatsApp Business Account ID
META_WABA_ID=your-whatsapp-business-account-id

# Webhook Verify Token (any random string you choose)
META_VERIFY_TOKEN=your-webhook-verify-token

# Your Meta Business ID (from Business Manager)
META_BUSINESS_ID=your-meta-business-id

# ==============================================================================
# BSP EMBEDDED SIGNUP CONFIGURATION (Interakt Model)
# ==============================================================================
# 
# BSP = Business Solution Provider
# 
# TWO MODES SUPPORTED:
# 
# 1. MANAGED WABA (Default - No BSP approval needed):
#    - Each customer gets their own WABA
#    - You manage it via the access token they grant
#    - Works with standard ESB config
# 
# 2. TRUE BSP (Interakt-style - Requires Meta BSP approval):
#    - Customer's phone added under YOUR parent WABA
#    - Requires META_SOLUTION_ID from Meta BSP program
#    - Apply at: https://www.facebook.com/business/partner-directory
#
# IMPORTANT: Your Meta app must be approved for WhatsApp Business API

# WhatsApp Embedded Signup Configuration ID
# Get this from: App Dashboard > WhatsApp > Getting Started > Embedded Signup
META_CONFIG_ID=your-embedded-signup-config-id

# (Optional) BSP Solution ID - ONLY if you have Meta BSP approval
# This enables true Interakt-style BSP where phones go under your parent WABA
# Leave empty for standard "Managed WABA" mode
META_SOLUTION_ID=

# Callback URL for OAuth redirect (must match your ESB config in Meta)
# Development: http://localhost:5001/api/v1/onboarding/bsp/callback
# Production: https://yourdomain.com/api/v1/onboarding/bsp/callback
ESB_CALLBACK_URL=http://localhost:5001/api/v1/onboarding/bsp/callback

# App URL (used for building callback URLs)
APP_URL=http://localhost:5001

# ==============================================================================
# SECURITY CONFIGURATION
# ==============================================================================

# Encryption key for sensitive data (tokens, credentials)
# CRITICAL: Generate a strong 32-byte random key in production
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# Example: openssl rand -base64 32
ENCRYPTION_KEY=21fa7a5fec48a34ad274c00c12b46661276404edae6fc58f1af6002416d9afd4

# Token Encryption Key (REQUIRED for Stage 1 BSP implementation)
# AES-256-GCM encryption for WhatsApp access tokens at rest
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
TOKEN_ENCRYPTION_KEY=your-64-character-hex-encryption-key-here

# (Optional) Old encryption key for key rotation (Task B)
# When rotating keys, move old TOKEN_ENCRYPTION_KEY here
# Old tokens will decrypt with this, new tokens encrypt with TOKEN_ENCRYPTION_KEY
# TOKEN_ENCRYPTION_KEY_V1=old-64-character-hex-key-for-v1-tokens

# ESB Callback URL (for Embedded Signup OAuth redirect)
ESB_CALLBACK_URL=http://localhost:5001/api/v1/onboarding/bsp/callback

# Webhook Security (for development/testing)
# Set to 'true' to skip webhook signature verification in development
SKIP_WEBHOOK_SIGNATURE=false

# ==============================================================================
# SETUP INSTRUCTIONS FOR BUSINESS VERIFICATION
# ==============================================================================
# 
# 1. META APP SETUP:
#    - Go to https://developers.facebook.com/
#    - Create a new app (Business type)
#    - Add WhatsApp product to your app
#    - Set up a System User in Business Manager
#    - Generate an access token with these permissions:
#      * whatsapp_business_management
#      * whatsapp_business_messaging
#
# 2. BUSINESS VERIFICATION:
#    - Complete Meta Business Verification in Business Manager
#    - For Indian businesses, you'll need:
#      * GST Number (GSTIN) OR
#      * MSME/Udyam Registration Number OR
#      * PAN Card Number
#    - Upload supporting documents in Business Settings
#
# 3. WHATSAPP NUMBER ACTIVATION:
#    - Add and verify your phone number in WABA
#    - Register the phone number for Cloud API
#    - Set up webhooks for message delivery
#
# 4. EMBEDDED SIGNUP (for multi-tenant SaaS):
#    - Enable Embedded Signup in App Dashboard
#    - Create a signup configuration with your redirect URLs
#    - Configure allowed domains for your platform
#
# ==============================================================================

# Optional Features
START_WORKER=false
START_ANALYTICS_CRON=false

# Razorpay (for payments)
RAZORPAY_KEY_ID=
RAZORPAY_KEY_SECRET=
